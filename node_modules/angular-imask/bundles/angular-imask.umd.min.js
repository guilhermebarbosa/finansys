!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@angular/core"),require("@angular/forms"),require("imask"),require("@angular/common")):"function"==typeof define&&define.amd?define("angular-imask",["exports","@angular/core","@angular/forms","imask","@angular/common"],e):e((t=t||self)["angular-imask"]={},t.ng.core,t.ng.forms,t.IMask,t.ng.common)}(this,(function(t,e,n,i,o){"use strict";var r="default"in i?i.default:i,s=function(){function t(){}return t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}();var a={provide:n.NG_VALUE_ACCESSOR,useExisting:e.forwardRef((function(){return p})),multi:!0},u=function(t){return t.nativeElement},p=function(){function t(t,n,i,o){this._elementRef=t,this._renderer=n,this._factory=i,this._compositionMode=o,this.onTouched=function(){},this.onChange=function(){},this.imaskElement=u,this.accept=new e.EventEmitter,this.complete=new e.EventEmitter,this._viewInitialized=!1,this._composing=!1,this._writing=!1,null==this._compositionMode&&(this._compositionMode=!this._isAndroid())}return Object.defineProperty(t.prototype,"element",{get:function(){return this.imaskElement(this._elementRef,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maskValue",{get:function(){return this.maskRef?"typed"===this.unmask?this.maskRef.typedValue:this.unmask?this.maskRef.unmaskedValue:this.maskRef.value:this.element.value},set:function(t){this.maskRef?"typed"===this.unmask?this.maskRef.typedValue=t:this.unmask?this.maskRef.unmaskedValue=t:this.maskRef.value=t:this._renderer.setProperty(this.element,"value",t)},enumerable:!0,configurable:!0}),t.prototype.ngAfterViewInit=function(){this.imask&&this.initMask(),this._viewInitialized=!0},t.prototype.ngOnChanges=function(t){t.elementRef&&!this.imaskElement&&(this.imaskElement=u),t.imask&&this._viewInitialized&&(this.imask?this.maskRef?this.maskRef.updateOptions(this.imask):(this.initMask(),this.onChange(this.maskValue)):this.destroyMask())},t.prototype.destroyMask=function(){this.maskRef&&(this.maskRef.destroy(),delete this.maskRef)},t.prototype.ngOnDestroy=function(){this.destroyMask(),this.accept.complete(),this.complete.complete()},t.prototype.beginWrite=function(t){this._writing=!0,this._writingValue=t},t.prototype.endWrite=function(){return this._writing=!1,this._writingValue},t.prototype.writeValue=function(t){t=null==t?"":t,this.maskRef?(this.beginWrite(t),(this.maskValue!==t||"string"!=typeof t&&""===this.maskRef.value&&!this.maskRef.el.isActive)&&(this.maskValue=t)):this._renderer.setProperty(this.element,"value",t)},t.prototype._onAccept=function(){var t=this.maskValue;this._writing&&t===this.endWrite()||(this.onChange(t),this.accept.emit(t))},t.prototype._onComplete=function(){this.complete.emit(this.maskValue)},t.prototype.initMask=function(){this.maskRef=this._factory.create(this.element,this.imask).on("accept",this._onAccept.bind(this)).on("complete",this._onComplete.bind(this))},t.prototype.setDisabledState=function(t){this._renderer.setProperty(this.element,"disabled",t)},t.prototype.registerOnChange=function(t){this.onChange=t},t.prototype.registerOnTouched=function(t){this.onTouched=t},t.prototype._handleInput=function(t){this.maskRef||(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)},t.prototype._compositionStart=function(){this._composing=!0},t.prototype._compositionEnd=function(t){this._composing=!1,this._compositionMode&&this._handleInput(t)},t.prototype._isAndroid=function(){return/android (\d+)/.test(navigator.userAgent.toLowerCase())},t.decorators=[{type:e.Directive,args:[{selector:"[imask]",host:{"(input)":"_handleInput($event.target.value)","(blur)":"onTouched()","(compositionstart)":"_compositionStart()","(compositionend)":"_compositionEnd($event.target.value)"},providers:[a]}]}],t.ctorParameters=function(){return[{type:e.ElementRef},{type:e.Renderer2},{type:s},{type:Boolean,decorators:[{type:e.Optional},{type:e.Inject,args:[n.COMPOSITION_BUFFER_MODE]}]}]},t.propDecorators={imask:[{type:e.Input}],unmask:[{type:e.Input}],imaskElement:[{type:e.Input}],accept:[{type:e.Output}],complete:[{type:e.Output}]},t}();var c=this&&this.__read||function(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var i,o,r=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(t){o={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},m=this&&this.__spread||function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(c(arguments[e]));return t},h=function(){function t(){}return t.prototype.transform=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i.pipe.apply(void 0,m(t))},t.decorators=[{type:e.Pipe,args:[{name:"imask"}]}],t}(),l=function(){function t(){}return t.prototype.create=function(t,e){return r(t,e)},t.decorators=[{type:e.Injectable,args:[{providedIn:"root"}]}],t.ngInjectableDef=e.ɵɵdefineInjectable({factory:function(){return new t},token:t,providedIn:"root"}),t}(),f=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[o.CommonModule],declarations:[p],providers:[{provide:s,useClass:l}],exports:[p]}]}],t}(),d=function(){function t(){}return t.decorators=[{type:e.NgModule,args:[{imports:[o.CommonModule,f],declarations:[h],exports:[h,f]}]}],t}();Object.defineProperty(t,"PIPE_TYPE",{enumerable:!0,get:function(){return i.PIPE_TYPE}}),Object.defineProperty(t,"pipe",{enumerable:!0,get:function(){return i.pipe}}),t.IMaskDirective=p,t.IMaskDirectiveModule=f,t.IMaskFactory=s,t.IMaskModule=d,t.IMaskPipe=h,t.MASKEDINPUT_VALUE_ACCESSOR=a,t.ɵa=l,Object.defineProperty(t,"__esModule",{value:!0})}));
//# sourceMappingURL=angular-imask.umd.min.js.map